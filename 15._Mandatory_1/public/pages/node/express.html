<h1 class="mt-2">Express</h1>
<hr />

<div class="row">
    <div class="col-4 col-lg-2">
        <nav id="sidebarExpress" class="h-100 flex-column align-items-stretch pe-4 border-end">
            <nav class="nav nav-pills flex-column sticky-top">
                <a class="nav-link nav-sidebar" href="#item-1">What is Express?</a>
                <a class="nav-link nav-sidebar" href="#item-2">Setup express</a>
                <a class="nav-link nav-sidebar" href="#item-3">How to run an express server</a>
                <a class="nav-link nav-sidebar" href="#item-4">Client Side Rendering (CSR)</a>
                <a class="nav-link nav-sidebar" href="#item-5">Serving static files to the client with express</a>
                <a class="nav-link nav-sidebar" href="#item-6">Server Side Rendering (SSR)</a>
            </nav>
        </nav>
    </div>

    <div class="col-8 col-lg-10">
        <div data-bs-spy="scroll" data-bs-target="#sidebarExpress" data-bs-smooth-scroll="true"
            class="scrollspy-example-2" tabindex="0">

            <div id="item-1">
                <h3>What is Express?</h3>
                <p>
                    Express is a web framework for Node.js that simplifies the process of building web applications
                    and APIs. It provides tools for handling HTTP requests and responses, managing routes, parsing
                    request bodies, handling cookies, and serving static files. Express is flexible, easy to use,
                    and has a large community of developers who have created many third-party modules and plugins to
                    extend its functionality. It is a popular choice for building fast, scalable, and reliable web
                    applications and APIs.
                </p>
            </div>

            <hr />

            <div id="item-2">
                <h3>Setup express</h3>
                <p>The first way we learned was to use "require" for importing here's a simpel example</p>
                <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/simpelExpressRequire.png">
                <p>The other way we learned was with importing express here's a simpel example</p>
                <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/simpelExpressImport.png">
                <p>This is just a simpel version with a page where it sends "Hello, World!" we have learned to create
                    API that can full CRUD (Create, read, update and delete) go to <a href="/restAPI#item-2">REST
                        API</a> if you want to see full rest api</p>
            </div>

            <hr />

            <div id="item-3">
                <h3>How to run an express server</h3>
                <p>
                    Assuming that you have already installed the framework dependencies, you can include
                    it in your app.js file, which is the starting point of your server. However, if you haven't
                    installed it yet, you can see the guide on <a href="/terminalCommands#item-3">how to install
                        express</a>.
                </p>
                <p>
                    To import it, you need to use the "require" keyword followed by "express()", which is a
                    top-level function that is exported by the express module
                    or use "import ... from ..." as shown under <a href="#item-2">Setup express</a>.
                </p>
                <p>
                    When it's completely setup we can use following command to run our express app and this command
                    is
                    assuming you at the correct directory and if you not at the right directory you have to "cd" to
                    the correct directory
                </p>
                <div>
                    <code class="prettyprint language-bsh">node app.js</code>
                </div>

                <p class="mt-2">
                    However, using the command mentioned above, we need to stop and run the server again every time we
                    make changes to our code. A better solution when developing is to use nodemon, a tool that
                    automatically restarts
                    the Node.js server whenever changes are made to the code, making the development process smoother.
                    To use nodemon, we need to install it globally by running the following command.
                </p>
                <div>
                    <code class="prettyprint language-bsh">npm install -g nodemon</code>
                </div>
                <p class="mt-2">The -g option tells npm to install nodemon globally, so you can use it from any
                    directory in your system.</p>

                <p>This command as shown is again assumed that you are at the correct directory.</p>
                <div>
                    <code class="prettyprint language-bsh">nodemon.cmd .\app.js</code>
                </div>
            </div>

            <hr />

            <div id="item-4">
                <h3>Client Side Rendering (CSR)</h3>
                <div>
                    <p>
                        Client-Side Rendering (CSR) is a technique for building web applications where the client's
                        browser is responsible for rendering the HTML, CSS, and JavaScript of a web page. When a user
                        requests a web page, the server sends a bare-bones HTML document that contains links to the CSS
                        and JavaScript files needed to render the page. Once the browser has loaded these files, it uses
                        them to build the page and make it interactive. This approach is different from Server-Side
                        Rendering (SSR), where the server sends a fully-formed HTML page to the client.

                        One of the benefits of CSR is that it can lead to faster load times, since the server only needs
                        to send a small amount of HTML to the client. Additionally, since the client is responsible for
                        rendering the page, it can help reduce server load and improve scalability. However, it can also
                        make it harder to optimize for search engines and can lead to slower initial page loads,
                        especially on slower devices or connections.
                    </p>
                    <h5>Advantages</h5>
                    <ul>
                        <li>
                            Faster subsequent load times: With CSR, subsequent page loads are faster since only
                            necessary data is requested from the server, resulting in faster load times.
                        </li>
                        <li>
                            More interactive UI: Client-side rendering frameworks like React and Vue enable developers
                            to create more dynamic and complex UIs, resulting in a more flexible and interactive user
                            experience.
                        </li>
                        <li>
                            Better support for dynamic content: Client-side rendering allows dynamic content to be
                            updated easily and without requiring a page reload, making it ideal for content that changes
                            frequently.
                        </li>
                        <li>
                            Reduced server load: Since most of the work is done on the client-side, the server load is
                            significantly reduced.
                        </li>
                        <li>
                            Easier to maintain: With CSR, updates can be made quickly and easily, making maintenance
                            less time-consuming.
                        </li>
                    </ul>
                    <h5>Disadvantages</h5>
                    <ul>
                        <li>
                            Slower initial load time: The browser has to download and execute JavaScript before
                            rendering the page, which can result in slower initial load times compared to server-side
                            rendering.
                        </li>
                        <li>
                            SEO challenges: Client-side rendering can pose challenges for search engines as the content
                            is generated dynamically, which may lead to lower search engine rankings.
                        </li>
                        <li>
                            Security challenges: Rendering HTML on the client-side can make it more difficult to prevent
                            client-side vulnerabilities, such as cross-site scripting (XSS) attacks.
                        </li>
                        <li>
                            Dependence on JavaScript: Client-side rendering depends on JavaScript being enabled, which
                            may be an issue for users who have it disabled or for accessibility concerns.
                        </li>
                        <li>
                            Lower performance on low-powered devices: Low-powered devices may struggle with the
                            processing demands of client-side rendering, leading to slower page load times.
                        </li>
                    </ul>
                </div>
            </div>

            <hr />

            <div id="item-5">
                <h3>Serving static files to the client with express</h3>
                <div>
                    <p>
                        This is a simple example of CSR setup using Node.js and Express. In this
                        example, the server is serving the static files from the public folder and routing the "/"
                        route to serve the "frontpage.html" file from the "public/pages/frontpage" folder.
                        When the browser requests the "/" route, the server will respond with the "frontpage.html" file,
                        which includes the necessary HTML, CSS, and JavaScript code to render the page on the
                        client-side. The client-side JavaScript will be executed in the browser, which will then render
                        the page based on the data retrieved from the server or user interactions.
                    </p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/CSR.png">

                    <p>Serve static files from the 'public' directory</p>
                    <code class="prettyprint language-js">app.use(express.static('public'));</code>
                </div>
            </div>

            <hr />

            <div id="item-6">
                <h3>Server Side Rendering (SSR)</h3>
                <div>
                    <h4>What is SSR?</h4>
                    <p>
                        SSR (Server-Side Rendering) is a technique used in web development that allows the server to
                        generate HTML pages that are sent to the client's web browser, rather than relying solely on the
                        client's browser to generate the HTML. This can result in faster load times and improved user
                        experience, as the client's browser receives a pre-built HTML page that can be displayed
                        immediately, rather than waiting for the browser to generate the page.
                    </p>
                    <ul>
                        <li>SSR is a technique for rendering web pages on the server before sending them to the client.
                        </li>
                        <li>
                            It's often used with frameworks like React or Vue, which can render their components to HTML
                            on
                            the server.
                        </li>
                        <li>
                            With SSR, the server sends the fully rendered HTML to the client, which can be faster and
                            more
                            SEO-friendly than a purely client-side rendered app.
                        </li>
                        <li>
                            SSR requires a backend server to handle the rendering process and send the HTML to the
                            client.
                        </li>
                        <li>
                            SSR can improve initial page load time, but may not necessarily improve overall app
                            performance
                            if the app is highly interactive and requires frequent updates.
                        </li>
                    </ul>
                    <h5>Advantages</h5>
                    <ul>
                        <li>
                            Faster perceived page load times for users since the initial HTML is sent by the server and
                            can
                            be rendered before the JavaScript loads.
                        </li>
                        <li>Improved SEO since search engines can more easily crawl and index the initial HTML.</li>
                        <li>Better performance on low-end devices since the server does most of the heavy lifting.</li>
                    </ul>
                    <h5>Disadvantages</h5>
                    <ul>
                        <li>
                            Increased server load and complexity since the server has to render the HTML for every
                            request.
                        </li>
                        <li>
                            Slower time to interactive since the browser has to download and execute the necessary
                            resources
                            (HTML, CSS, and JavaScript) before the page can be fully interactive. This can be especially
                            noticeable on slower devices or connections.
                        </li>
                    </ul>
                </div>
                <div>
                    <h4>How do we do SSR in express?</h4>
                    <p>
                        It's important to understand that the SSR logic is not handled by Express, but rather by Node.
                        This is because Node has a built-in module called FileSystem that allows you to work with your
                        filesystem.
                    </p>
                    <p>
                        To use server side rendering, we first need to import it into our app.js
                        we can do this in 2 ways depending what we have done i the project example if we use require
                        then we can do it this way
                    </p>
                    <code class="prettyprint language-js">const fs = require("fs");</code>

                    <p class="mt-2">or else we can use import</p>
                    <code class="prettyprint language-js">import fs from "fs";</code>

                    <p class="mt-2">Then we can use fs to read our file. Here's an example to frontpage</p>
                    <code
                        class="prettyprint language-js">const navbar = fs.readFileSync(`public/pages/frontpage/frontpage.html`).toString();</code>
                    <p class="mt-2">
                        When we have done that we are now ready to use SSR.
                        To descripe the way we gonna structure our files in SSR is like a sandwich → the bread, filling,
                        bread.
                        So in our concept is like → header, main, footer. These are called components and they allow us
                        to reuse HTML elements, so we can avoid duplicating code, such as the navbar, on every HTML
                        document.
                    </p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/SSRStructure.png">
                    <p>Explame how the different part looks like first "header" in our case it's navbar</p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/header-navbar.png">
                    <p>Seconnd is main this is where we have what the page have of content example</p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/main-frontpage.png">
                    <p>Then in footer we have example script, footer and closed element as seen below</p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/footer.png">

                    <p>Now the app.js will look like this</p>
                    <img class="img-container img-fluid mx-auto d-block" src="/pages/node/images/SSR.png">
                </div>
            </div>
        </div>
    </div>
</div>